<!DOCTYPE html>
<html>
  <head>
    <%- include('head'); -%>
    <style>
      .logIn{
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%,-50%);
      }
      .title{
        position: absolute;
        left: 50%;
        top: 25%;
        transform: translate(-50%,-50%);
      }
    </style>
  </head>

  <body>
      <div style="background-image": "'url('https://www.stlawu.edu/news/st-lawrence-goes-us-news-rankings')'}">
      </div>
      <h2 class ="title">SLU Clubs and Theme Houses</h2>
      <div class="logIn">
        <form id="signinForm">
          <input positive: relative type="text" id = "curID" name="id">
          <button type="submit" id= "signin">Sign In</button>
        </form>




      </div>


      <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
      <script>

        $('#signinForm').on('submit', function(event) {
          event.preventDefault();
          const form = $(this);

          //const currentID = $('#curID').val();
            $.ajax({method: 'post', url: '/login', data: form.serialize()})
             .done(() => window.location.replace("/clubs"))
             .fail(error => alert('Could not log in.'));
        });


/*



        $('#signupForm').on('submit', function(event) {
          event.preventDefault();
          const form = $(this);
          var new_id = document.getElementById("curID").value;
          console.log(new_id);

          // const userList = users.map(user=>user._id);
          // for (const i in userList){
          //   console.log(i);
          // }

          // if (userList.indexOf(new_id)<0) {
          //   console.log("new_id");
          //   users.push(new User ({_id: new_id, club_theme_house_created_by_me: []}));
          // }

          //new User ({_id:${new_id.val(), club_theme_house_created_by_me:[]});

          <%_ if (Object.entries(user).length === 0) {-%>
            $.ajax({method: 'post', url: '/signup', data: form.serialize()})
              .done(() => alert('Signup successfully.'))
              .fail(error => alert('Fail to signup with this ID.'));
          <%_ } -%>
         });

        //   $.ajax({method: 'post', url: '/user', data: form.serialize()})
        //     .then(function(){
        //       const userList = users.map(user=>user._id);
        //       if (userList.indexOf(new_id)<0) {
        //         console.log("new_id");
        //         new User ({_id: request.body.id, club_theme_house_created_by_me: []})
        //       };
        //     })
        //     //.then(() => alert('Sign up successfully.'))
        //     .done(() => window.location.replace("/clubs"))
        //     .fail(error => alert('Could not sign up with this ID.'));
        // });




/*
          // if the id is existed



          $.ajax({method: 'post', url: '/login', data: form.serialize()})
            .done(() => window.location.reload());
        });
*/
      </script>



  </body>
</html>
