<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>

  // Create a club
  // $('#create').on('submit', function(event) {
  //   const form = $(this);
  //   event.preventDefault();
  //
  //   $.ajax({method: 'post', url: '/clubs', data: form.serialize()})
  //     .done(id => window.location.replace(`/clubs/${id}`))
  //     .fail(error => alert('Fail to create the club.'));
  // });



  $('#join').on('click', function(event) {
    const form = $(this);
    event.preventDefault();
    var curClub = function GetUrlRelativePath()
　　{
　　　　var url = document.location.toString();
　　　　var arrUrl = url.split("//");

　　　　var start = arrUrl[1].indexOf("/");
　　　　var relUrl = arrUrl[1].substring(start);//stop省略，截取从start开始到结尾的所有字符

　　　　if(relUrl.indexOf("?") != -1){
　　　　　　relUrl = relUrl.split("?")[0];
　　　　}
　　　　return relUrl;
　　};
    $.ajax({method: 'put', url: '/clubs', data: curClub})
    .done(club => window.location.replace(`/clubs/${club}`))
      .fail(alert('You are already in this club/theme house.'));
    }
  );
</script>
